<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h2 mb-0 text-dark">Movies List</h1>
  </div>
  
  <div class="card mb-4">
    <div class="card-header bg-light">
      <h5 class="card-title mb-0 text-dark">Filters</h5>
    </div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-4">
          <label for="yearFilter" class="form-label">Year</label>
          <input 
            id="yearFilter"
            type="number" 
            [(ngModel)]="selectedYear" 
            placeholder="e.g., 1990"
            class="form-control"
            min="1980"
            max="2030"
          />
        </div>
        
        <div class="col-md-4">
          <label for="winnerFilter" class="form-label">Winner Status</label>
          <select id="winnerFilter" [(ngModel)]="selectedWinner" class="form-select">
            <option [ngValue]="null">All Movies</option>
            <option [ngValue]="true">Winners Only</option>
            <option [ngValue]="false">Non-Winners Only</option>
          </select>
        </div>
        
        <div class="col-md-4 d-flex align-items-end">
          <div class="btn-group w-100" role="group">
            <button (click)="applyFilters()" class="btn btn-outline-secondary">
              Apply Filters
            </button>
            <button (click)="clearFilters()" class="btn btn-outline-secondary">
              Clear All
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Loading State -->
  <app-loading 
    *ngIf="loading" 
    message="Loading movies...">
  </app-loading>

  <!-- Error State -->
  <app-error-message 
    *ngIf="error && !loading"
    [message]="errorMessage"
    (retry)="onRetry()">
  </app-error-message>

  <!-- Success State -->
  <div *ngIf="!loading && !error && (movies$ | async) as movieData" class="card">
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0 text-dark">
        Movies ({{ movieData.totalElements }} total)
      </h5>
      <small class="text-muted">
        Page {{ movieData.number + 1 }} of {{ movieData.totalPages }}
      </small>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-sm mb-0">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Year</th>
              <th scope="col">Title</th>
              <th scope="col" class="text-center">Winner</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let movie of movieData.content">
              <td class="fw-medium">{{ movie.id }}</td>
              <td>{{ movie.year }}</td>
              <td>{{ movie.title }}</td>
              <td class="text-center">
                {{ movie.winner ? 'Yes' : 'No' }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="card-footer">
      <app-pagination 
        [currentPage]="movieData.number"
        [totalPages]="movieData.totalPages"
        [totalElements]="movieData.totalElements"
        [size]="movieData.size"
        (pageChange)="onPageChange($event)"
      ></app-pagination>
    </div>
  </div>
</div>