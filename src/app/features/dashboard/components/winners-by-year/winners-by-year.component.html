<div class="card-header bg-light">
  <h5 class="card-title mb-0 text-dark">
    List movie winners by year
  </h5>
</div>

<div class="card-body">
  <div class="mb-3">
    <div class="input-group">
      <input 
        id="yearInput"
        type="number" 
        [(ngModel)]="selectedYear" 
        class="form-control"
        min="1980"
        max="2030"
        placeholder="Search by year"
      />
      <button 
        (click)="searchWinners()" 
        class="btn btn-outline-secondary"
        type="button"
      >
        Search
      </button>
    </div>
  </div>
  
  <!-- Loading State -->
  <app-loading 
    *ngIf="loading" 
    message="Loading winners...">
  </app-loading>

  <!-- Error State -->
  <app-error-message 
    *ngIf="error && !loading"
    [message]="errorMessage"
    (retry)="onRetry()">
  </app-error-message>
  
  <!-- Success State -->
  <div *ngIf="!loading && !error && (winnersData$ | async) as winners">
    <div *ngIf="winners.length > 0" class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Year</th>
            <th scope="col">Title</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let winner of winners">
            <td>{{ winner.id }}</td>
            <td>{{ winner.year }}</td>
            <td>{{ winner.title }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="winners.length === 0" class="text-muted text-center py-3">
      No winners found for the year {{ selectedYear }}
    </div>
  </div>
</div>
